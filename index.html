<!DOCTYPE html>
<html>

<head>
    <title>half_earth_game</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/cartodb.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="node_modules/sweetalert/dist/sweetalert.css">
</head>

<body>
    <div id="menu">
        <h1>What is half_earth_game?</h1>
        <p>The graphic designer’s first fucking consideration is always the size and shape of the format, whether for the printed page or for digital display. Think about all the fucking possibilities. Sometimes it is appropriate to place various typographic
            elements on the outside of the fucking left margin of text to maintain a strong vertical axis.</p>
        <ul>
            <li>Contact</li>
            <li>Go github</li>
            <li>map_game_nature v.0.2</li>
        </ul>
    </div>
    <div id="questionbox"></div>
    <div class="scorenav">
        <b>Your score: <span id="scorenumber">0 </span><!-- | </span><span id="openmenubutn">open menu</span>--><span id="finishbutn"> | finish game</span></b>
    </div>
    <div id="map">
    </div>
    <script src="js/jquery-2.2.4.min.js"></script>
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <script src="node_modules/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        var number = 0;
        var scorenumber = 0;
        var numbers = [number];
        var numberquestion = 1;
        var questions = ['THE REDWOOD FORESTS OF CALIFORNIA', 'THE LONGLEAF PINE SAVANNA OF THE SOUTHEASTERN UNITED STATES', 'THE MADREAN PINE-OAK WOODLANDS IN MEXICO AND THE SOUTHWESTERN UNITED STATES ', 'CUBA AND HISPANIOLA',
            'THE AMAZON RIVER BASIN', 'THE GUIANA SHIELD OF GUYANA, SURINAME, AND FRENCH GUIANA', 'THE TEPUIS OF VENEZUELA AND GUYANA', 'THE GREATER MANÚ REGION OF PERU', 'THE CLOUD AND SUMMIT FORESTS OF CENTRAL AMERICA AND THE NORTHERN ANDES',
            'THE PÁRAMOS OF SOUTH AMERICA', 'THE ATLANTIC FORESTS OF SOUTH AMERICA', 'THE CERRADO', 'THE PANTANAL', 'THE GALÁPAGOS', 'BIAŁOWIEŻA FOREST OF POLAND AND BELARUS', 'LAKE BAIKAL OF RUSSIAN SIBERIA',
            'THE CHRISTIAN ORTHODOX CHURCH FOREST OF ETHIOPIA', 'SOCOTRA', 'THE SERENGETI GRASSLAND ECOSYSTEM', 'GORONGOSA NATIONAL PARK, MOZAMBIQUE', 'SOUTH AFRICA', 'FOREST OF THE CONGO BASIN', 'THE ATEWA FORESTS OF GHANA', 'MADAGASCAR',
            'THE ALTAI MOUNTAINS', 'BORNEO', 'THE WESTERN GHATS OF INDIA', 'BHUTAN', 'MYANMAR', 'SCRUBLANDS OF SOUTHWESTERN AUSTRALIA', 'THE KIMBERLEY REGION OF NORTHWESTERN AUSTRALIA', 'THE GIBBER PLAINS', 'NEW GUINEA', 'NEW CALEDONIA',
            'MCMURDO DRY VALLEYS', 'HAWAII'
        ];
        var answer = ['THE REDWOOD FORESTS OF CALIFORNIA', 'THE LONGLEAF PINE SAVANNA OF THE SOUTHEASTERN UNITED STATES', 'THE MADREAN PINE-OAK WOODLANDS IN MEXICO AND THE SOUTHWESTERN UNITED STATES ', 'CUBA AND HISPANIOLA', 'THE AMAZON RIVER BASIN',
            'THE GUIANA SHIELD OF GUYANA, SURINAME, AND FRENCH GUIANA', 'THE TEPUIS OF VENEZUELA AND GUYANA', 'THE GREATER MANÚ REGION OF PERU', 'THE CLOUD AND SUMMIT FORESTS OF CENTRAL AMERICA AND THE NORTHERN ANDES',
            'THE PÁRAMOS OF SOUTH AMERICA', 'THE ATLANTIC FORESTS OF SOUTH AMERICA', 'THE CERRADO', 'THE PANTANAL', 'THE GALÁPAGOS', 'BIAŁOWIEŻA FOREST OF POLAND AND BELARUS', 'LAKE BAIKAL OF RUSSIAN SIBERIA',
            'THE CHRISTIAN ORTHODOX CHURCH FOREST OF ETHIOPIA', 'SOCOTRA', 'THE SERENGETI GRASSLAND ECOSYSTEM', 'GORONGOSA NATIONAL PARK, MOZAMBIQUE', 'SOUTH AFRICA', 'FOREST OF THE CONGO BASIN', 'THE ATEWA FORESTS OF GHANA', 'MADAGASCAR',
            'THE ALTAI MOUNTAINS', 'BORNEO', 'THE WESTERN GHATS OF INDIA', 'BHUTAN', 'MYANMAR', 'SCRUBLANDS OF SOUTHWESTERN AUSTRALIA', 'THE KIMBERLEY REGION OF NORTHWESTERN AUSTRALIA', 'THE GIBBER PLAINS', 'NEW GUINEA', 'NEW CALEDONIA',
            'MCMURDO DRY VALLEYS', 'HAWAII'
        ];
        var contador = questions.length;
        number = Math.floor((Math.random() * contador) + 0);
        swal({
            title: "half_earth_game",
            text: "Answer 36 questions with the map, good luck!",
            confirmButtonColor: "#f55959",
            confirmButtonText: "Start, right now!",
            closeOnConfirm: false,
        }, function() {
            document.getElementById("questionbox").innerHTML = "<span>WHERE IS " + questions[number] + " ?</span>";
            contador--;
            questions.splice(number, 1);
            contador = questions.length;
            swal({
                title: "Question "+numberquestion,
                text: "WHERE IS " + questions[number] + " ?",
                confirmButtonColor: "#f55959",
                confirmButtonText: "Go map",
            });
        });

        function main() {
            var map = new L.Map('map', {
                zoomControl: false,
                center: [0, 0],
                zoom: 3
            });
            L.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', { /*http://maps.stamen.com/*/
                attribution: 'Stamen'
            }).addTo(map);
            var popup = L.popup();
            //map.on('click', onMapClick);
            cartodb.createLayer(map, {
                    user_name: 'hectoruch',
                    type: 'cartodb',
                    sublayers: [{
                        sql: "SELECT * FROM map_game_nature",
                        cartocss: '#map_game_nature{ marker-fill-opacity: 1; marker-line-color: #FFF; marker-line-width: 1.5; marker-line-opacity: 1; marker-placement: point; marker-type: ellipse; marker-width: 20; marker-fill: #f55959; marker-allow-overlap: true; }',
                        interactivity: 'name, the_geom, description'
                    }]
                })
                .addTo(map)
                .done(function(layer) {
                    layer.setInteraction(true);
                    layer.on('featureClick', function(e, latlng, pos, data) {
                        if (answer[number] == data.name) {
                            scorenumber++;
                            document.getElementById("scorenumber").innerHTML = scorenumber + " ";
                            swal({
                                title: "Great :)",
                                text: data.description,
                                type: "success",
                                confirmButtonColor: "#f55959",
                                confirmButtonText: "Next question",
                                closeOnConfirm: false,
                            }, function() {
                                number = Math.floor((Math.random() * contador) + 0);
                                document.getElementById("questionbox").innerHTML = "<span>WHERE IS " + questions[number] + " ?</span>";
                                numberquestion++;
                                swal({
                                    title: "Question "+numberquestion,
                                    text: "WHERE IS " + questions[number] + " ?",
                                    confirmButtonColor: "#f55959",
                                    confirmButtonText: "Go map",
                                });
                                questions.splice(number, 1);
                                contador = questions.length;
                            });
                        } else {
                            scorenumber--;
                            document.getElementById("scorenumber").innerHTML = scorenumber + " ";
                            swal({
                                title: "Fail :(",
                                text: "",
                                type: "error",
                                confirmButtonColor: "#f55959",
                                confirmButtonText: "Next question",
                                closeOnConfirm: false,
                            }, function() {
                                number = Math.floor((Math.random() * contador) + 0);
                                document.getElementById("questionbox").innerHTML = "<span>WHERE IS " + questions[number] + " ?</span>";
                                numberquestion++;
                                swal({
                                    title: "Question "+numberquestion,
                                    text: "WHERE IS " + questions[number] + " ?",
                                    confirmButtonColor: "#f55959",
                                    confirmButtonText: "Go map",
                                });
                                questions.splice(number, 1);
                                contador = questions.length;
                            });
                        }
                    });
                }).on('error', function() {
                    cartodb.log.log("some error occurred");
                });
        }
        window.onload = main;
        $("#openmenubutn").click(function() {
            $("#scorenav").css("display", "none");
            $("#menu").slideToggle("slow", function() {});
        });

        $("#finishbutn").click(function() {
            swal({
                title: "Your score is",
                text: scorenumber,
                confirmButtonColor: "#f55959",
                confirmButtonText: "Play again",
                closeOnConfirm: false,
            }, function() {
                scorenumber = 0;
                document.getElementById("scorenumber").innerHTML = scorenumber + " | ";
                questions = answer;
                contador = questions.length;
                number = Math.floor((Math.random() * contador) + 0);
                numberquestion=1;
                swal({
                    title: "Question",
                    text: "WHERE IS " + questions[number] + " ?",
                    confirmButtonColor: "#f55959",
                    confirmButtonText: "Go map",
                });
            });
        });
    </script>
    <script src="js/functions.js"></script>
</body>

</html>
